!function(){"use strict";try{!function(){function t(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,function(t){t=t||window.event,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},i.call(self,t)})}function e(t){this.id=a(),this.container=t,this.options={frameBorder:0,allowTransparency:"true",scrolling:"no",styles:{borderStyle:"none",backgroundColor:"transparent",display:"block",overflow:"hidden",height:0,width:0}},this.hasSentImpression=!1,this.queryString=this.createQueryStringFromDataSet(),this.iframes={},this.applyWidget()}function i(t,e,i,n){var o=e?e:{};return o.position=t.styles.position||"",o.zindex=t.styles.zindex||"",o.margin=t.styles.margin||"",o.top=t.styles.top||"",o.bottom=t.styles.bottom||"",o.left=t.styles.left||"",o.right=t.styles.right||"",o.height=t.styles.height||"",o.width=t.styles.width||e.styles.width||"",o.display=t.show?"block":"none",o.src=i+t.source+n,o.borderStyle=e.styles.borderStyle,o.overflow=e.styles.overflow,o}function n(t){var e=document.createElement("iframe");return e.style.position=t.position,e.style.zIndex=t.zindex,e.style.margin=t.margin,e.style.top=t.top,e.style.bottom=t.bottom,e.style.left=t.left,e.style.right=t.right,e.style.height=t.height,e.style.width=t.width,e.style.borderStyle=t.borderStyle,e.style.backgroundColor=t.backgroundColor,e.style.display=t.display,e.style.overflow=t.overflow,e.frameBorder=t.frameBorder,e.scrolling=t.scrolling,e.allowTransparency=t.allowTransparency,e.src=t.src,e}function o(t){var e=/(px|\%)/i,i="";return t&&t.length>0&&(i=e.test(t)?t:t+"px"),i}function r(){var t,e,i,n,o,r;if(document.getElementsByClassName)t=document.getElementsByClassName("trustpilot-widget");else if(document.querySelectorAll)t=document.querySelectorAll(".trustpilot-widget");else{for(e=[],i=new RegExp("(^| )trustpilot-widget( |$)"),n=document.body.getElementsByTagName("*"),o=0,r=n.length;r>o;o++)i.test(n[o].className)&&e.push(n[o]);t=e}return t}function a(){var t=Math.random();return a[t]?a():(a[t]=!0,t)}function s(){return this.loading=!0,this}var d="index.html",l="https:"==document.location.protocol?"https:":"http:",c=l+"//widget.trustpilot.com",u=l+"//widget.trustpilot.com/trustboxes",h=!1;e.prototype={applyWidget:function(){var e,i,n,o=this;if(!this.container)throw"Unable to locate a widget container";if(this.container.style.position="relative",e=this.container.getAttribute("data-template-id"),i=this.container.getAttribute("data-businessunit-id"),n=this.container.getAttribute("data-locale"),!e||!i||!n)throw"Missing template id, business unit id or locale";this.options.styles.height=this.getHeightAttribute(),this.options.styles.width=this.getWidthAttribute(),this.options.show=!0,this.baseUrl=u+"/"+e+"/",this.options.source=d,this.createIFrame("main",this.options),t(window,"message",function(t){if(t.origin===c&&"string"==typeof t.data){var e;try{e=JSON.parse(t.data)}catch(i){return void console.log("Invalid data sent on widget: "+t.data)}var n={data:e,origin:t.origin};n.data.widgetId===o.id&&o.widgetIframeMessageHandler(n)}},!1)},getWidthAttribute:function(){var t=this.container.getAttribute("data-style-width").toLowerCase();return o(t)},getHeightAttribute:function(){var t=this.container.getAttribute("data-style-height").toLowerCase();return o(t)},widgetIframeMessageHandler:function(t){switch(t.data.command){case"createIFrame":this.createIFrame(t.data.name,t.data);break;case"setStyle":this.setStyle(t.data.name,t.data.style);break;case"loaded":this.sendLoadedToMainFrame();break;case"message":this.sendMessage(this.iframes[t.data.name],t.data);break;case"resize-height":this.resizeHeight(t.data.name,t.data.height);break;case"impression":if(this.hasSentImpression)return;this.hasSentImpression=!0,this.sendMessage(this.iframes.main,{command:"impression-received",url:window.document.URL,referrer:window.document.referrer,userAgent:window.navigator.userAgent,language:window.navigator.userLanguage||window.navigator.language,platform:window.navigator.platform});break;case"product-review-data":h||(this.createJsonLdElement(t.data.jsonLd),h=!0)}},getElementDataSet:function(){var t,e,i,n=0,o={};if("undefined"==typeof this.container.dataset){if(!this.container.attributes)return;for(n;n<this.container.attributes.length;n++)t=this.container.attributes[n],e=t.name.match(/^data-(.+)$/i),e&&(i=this.toCamelCase(e[1]),o[i]=t.value);return o}return this.container.dataset},createQueryStringFromDataSet:function(){var t,e=this.getElementDataSet(),i="?";for(t in e)i+=t+"="+encodeURIComponent(e[t])+"&";return i.replace(/(\&|\?)+$/,"")},createIFrame:function(e,o){var r=n(i(o,this.options,this.baseUrl,this.queryString)),a=this;this.iframes[e]=r,this.container.appendChild(r),t(r,"load",function(){a.setWidgetId(r)})},setStyle:function(t,e){var i=this.iframes[t]||this.iframes.main;for(var n in e)i.style[n]=e[n]},sendLoadedToMainFrame:function(){this.sendMessage(this.iframes.main,"loaded")},resizeHeight:function(t,e){if("number"==typeof e){var i=this.iframes[t]||this.iframes.main;i&&(i.style.height=e+"px")}},sendMessage:function(t,e){e=JSON.stringify(e),t.contentWindow.postMessage(e,c)},setWidgetId:function(t){this.sendMessage(t,{command:"setId",widgetId:this.id})},toCamelCase:function(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})},createJsonLdElement:function(t){var e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.innerHTML=JSON.stringify(t),document.head.appendChild(e)}},s.prototype.initializeOnPageLoad=function(){if(this.loading){var t=5;"complete"!==document.readyState?setTimeout(function(){window.Trustpilot.Modules.WidgetManagement.initializeOnPageLoad()},t):window.Trustpilot.Modules.WidgetManagement.findAndApplyWidgets()}},s.prototype.findAndApplyWidgets=function(){this.loading=!0;var t=r();if(!t||t.length<1)return void(this.loading=!1);for(var i=t.length,n=0;i>n;n++)new e(t[n]);this.loading=!1},s.prototype.removeWidgets=function(){for(var t=r(),e=0;e<t.length;++e)for(;t[e].firstChild;)t[e].removeChild(t[e].firstChild)},window.Trustpilot=window.Trustpilot||{},window.Trustpilot.Modules=window.Trustpilot.Modules||{},window.Trustpilot.Modules.WidgetManagement=window.Trustpilot.Modules.WidgetManagement||new s,window.Trustpilot.Modules.WidgetManagement.loading=!0,window.Trustpilot.Modules.WidgetManagement.initializeOnPageLoad()}()}catch(t){!function(){function t(t){console.error("Error on bootstrap:"+t);var e="//widget.trustpilot.com/feedback/report-error",i="error="+encodeURIComponent(t)+"&uri="+encodeURIComponent(document.URL),n=document.createElement("img");n.src=e+"?"+i}try{t("object"==typeof e?e.message:e)}catch(e){console.error("Error on error reporting method:"+e)}}()}}();
